<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Shaka Player Embedded: ABI Guidelines</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Shaka Player Embedded
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">ABI Guidelines </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This document describes guidelines for maintaining ABI compatibility. As a C++ project, we need to consider an app that loads a newer version of the library while they compiled using an older version of the headers. ABI (application-binary interface) specifies how the executable will interact with the library at a binary level. By maintaining ABI compatibility, an app can load newer versions of the library using a <code>.dll</code> or <code>.so</code> file and it will still work.</p>
<p>We only maintain ABI compatibility within major release numbers. v1.1 will be compatible with v1.4, but not compatible with v2.1. We make no promises about partial compatibility between major versions. It should be assumed that v2 is completely incompatible with v1.</p>
<p>We also only maintain ABI compatibility with release versions and release branches; master branch can break ABI at any time. Any commit that will break ABI should have a line in the commit message with <code>Abi-Breaking:</code> and a reason.</p>
<h2>Removing Features</h2>
<p>When something is to be removed from the library, it can only be done on a major version release. Once a feature is decided to be removed, the next minor release should mark the feature as deprecated so the compiler will warn the app and a log will be printed. We will make at least one minor release before removing a feature.</p>
<p>For example, if we wanted to remove a feature, we would mark it deprecated in v1.4. Then when we release v2 we will remove the feature. We will not remove any features in v2 unless they were marked as deprecated in the previous minor release.</p>
<h2>Guidelines for Developers</h2>
<p>These guidelines are based on the guidelines by the KDE team: <a href="https://community.kde.org/Policies/Binary_Compatibility_Issues_With_C%2B%2B">https://community.kde.org/Policies/Binary_Compatibility_Issues_With_C%2B%2B</a></p>
<p>We only need to worry about ABI on the public types. This means that we are completely free to change anything about internal types. This includes implementations of public types. For example, ImplementationHelper is a public interface type, so we need to think about ABI for it; but the type that implements that interface can be changed without breaking public ABI.</p>
<h3>What you can change</h3>
<ul>
<li>Anything in a <code>.cc</code> file, <code>.js</code> file, or an internal-only <code>.h</code> file.</li>
<li>Add new static data members.</li>
<li>Add new non-virtual functions (must appear last).</li>
<li>Add new virtual functions (must appear last) (may not work on Windows).</li>
<li>Add a new constructor.</li>
<li>Change a private Impl class definition.</li>
<li>Add values to an <code>enum</code> or <code>enum class</code>.<ul>
<li>You can't change existing values.</li>
<li>You cannot change the underlying type (e.g. from <code>uint8_t</code> to <code>uint16_t</code>).</li>
</ul>
</li>
<li>Rename private members.</li>
</ul>
<h3>What you cannot change</h3>
<ul>
<li>The signature of a public function (return type, arguments, <code>const</code>).<ul>
<li>You cannot add an argument even if it has a default value.</li>
</ul>
</li>
<li>The accessibility of an existing member.<ul>
<li>You cannot even make a private member public.</li>
</ul>
</li>
<li>Class hierarchy.</li>
<li>Add new virtual methods if the app will inherit from it.</li>
<li>Add new non-static data members.</li>
<li>Change the order of members.</li>
<li>Insert a member before an existing member.</li>
</ul>
<h3>Adding new types</h3>
<p>If you define a new public type, you should do the following:</p>
<ul>
<li>Include a virtual, non-inline destructor.<ul>
<li>Can be non-virtual if type is <code>final</code> or the type shouldn't be destroyed by the app.</li>
</ul>
</li>
<li>Include a non-inline copy and move constructor/assignment operator.<ul>
<li>If the type shouldn't be moved/copied, explicitly delete them.</li>
</ul>
</li>
<li>Include an Impl type and private member, even if it doesn't use it.<ul>
<li>If the type is an interface, you don't need this.</li>
</ul>
</li>
<li>Mark type as <code>final</code> unless it is an interface.</li>
<li><code>enum</code> or <code>enum class</code> should have an explicit base type. </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
